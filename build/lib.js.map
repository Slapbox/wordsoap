{"version":3,"sources":["/Users/raine/projects/wordsoap/src/lib.js"],"names":["_$22174","require","regexes$22175","deadAttributes","source","nbsp","conditional","htmlComments","oleLink","emptyTags","emptyAttributes","deadTags","deadTagsAndContent","contentLine","url","regexesCompiled$22178","mapValues","a$22182","RegExp","clean$22181","a$22183","replace","module","exports","regexes","regexesCompiled"],"mappings":"AAAA;AAEA,IAAIA,OAAA,GAAIC,OAAA,CAAQ,QAAR,CAAR,CAFA;AAIA,IAAIC,aAAA,GAAU;AAAA,IAGbC;AAAAA,kBAAA,E,2HAA2IC,MAH9H;AAAA,IAKbC,IAAA,E,sCAA4CD,MAL/B;AAAA,IAQbE;AAAAA,eAAA,E,wCAAqDF,MARxC;AAAA,IAUbG,YAAA,E,YAA0BH,MAVb;AAAA,IAYbI,OAAA,E,8CAAuDJ,MAZ1C;AAAA,IAcbK,SAAA,E,4BAAuCL,MAd1B;AAAA,IAgBbM,eAAA,E,iBAAkCN,MAhBrB;AAAA,IAkBbO,QAAA,E,mCAA6CP,MAlBhC;AAAA,IAoBbQ,kBAAA,E,oCAAwDR,MApB3C;AAAA,IAsBbS,WAAA,E,cAA2BT,MAtBd;AAAA,IAwBbU,GAAA,E,mHAAwHV,MAxB3G;AAAA,CAAd,CAJA;AAiCA,IAAIW;AAAAA,qBAAA,GAAkBf,OAAA,CAAEgB,SAAF,CAAYd,aAAZ,EACJ,UAAAe,OAAA;AAAA,IAD2B,WAAIC,MAAJ,CAC3BD,OAD2B,EAAc,IAAd,EAC3B;AAAA,CADI,CAAtB,CAjCA;AAmCA,IAAIE,WAAA,GA0DA,UAASC,OAAT,EAAY;AAAA,IAAE,OAAOA,OAAA,CAzDvBC,OAyDuB,CAzDfN,qBAAA,CAAgBZ,cAyDD,EAzDiB,EAyDjB,EAxDvBkB,OAwDuB,CAxDfN,qBAAA,CAAgBV,IAwDD,EAxDO,EAwDP,EAvDvBgB,OAuDuB,CAvDfN,qBAAA,CAAgBT,WAuDD,EAvDc,EAuDd,EAtDvBe,OAsDuB,CAtDfN,qBAAA,CAAgBR,YAsDD,EAtDe,EAsDf,EArDvBc,OAqDuB,CArDfN,qBAAA,CAAgBL,eAqDD,EArDkB,EAqDlB,EApDvBW,OAoDuB,CApDfN,qBAAA,CAAgBJ,QAoDD,EApDW,EAoDX,EAnDvBU,OAmDuB,CAnDfN,qBAAA,CAAgBH,kBAmDD,EAnDqB,EAmDrB,EAlDvBS,OAkDuB,CAlDfN,qBAAA,CAAgBP,OAkDD,EAlDU,IAkDV,EAjDvBa,OAiDuB,CAjDfN,qBAAA,CAAgBN,SAiDD,EAjDY,EAiDZ,EAhDvBY,OAgDuB,CAhDf;AAAA,IAAAN,qBAAA,CAAgBF,WAgDD,EAhDc,KAgDd,EA/CvBQ,OA+CuB,CA/CfN,qBAAA,CAAgBD,GA+CD,EA/CM,qBA+CN,EA9CvBO,OA8CuB,CA9Cf,IAAIH,MAAJ,CAAW,QAAX,EAAqB,IAArB,CA8Ce,EA9Ca,MA8Cb,EA7CvBG,OA6CuB,CA7Cf;AAAA,QAAIH,MAAJ,CAAW,QAAX,EAAqB,IAArB,CA6Ce,EA7Ca,GA6Cb,CAAP,CAAF;AAAA,CA1DhB,CAnCA;AAkDA;AAAAI,MAAA,CAAOC,OAAP,GAAiBJ,WAAjB,CAlDA;AAmDAG,MAAA,CAAOC,OAAP,CAAeC,OAAf,GAAyBtB,aAAzB,CAnDA;AAoDAoB,MAAA,CAAOC,OAAP,CAAeE,eAAf,GAAiCV,qBAAjC","file":"lib.js","sourcesContent":["'use strict'\n\nvar _ = require('lodash')\n\nvar regexes = {\n\t// Inspired by: http://tim.mackey.ie/2005/11/23/CleanWordHTMLUsingRegularExpressions.aspx\n\n\tdeadAttributes: /(?:\\s+(?:id|class|lang|style|size|face|link|vlink|align|clear|xmlns(?::\\w+|[ovwxp\\w+])?))=(?:'[^']*'|\"\"[^\"\"]*\"\"|[^\\s>]+)/.source,\n\n\tnbsp: /(<[^\\s>]*>&nbsp;<\\/[^\\s>]*>)|&nbsp;/.source,\n\n\t// https://regex101.com/r/sD4vJ8\n\tconditional: /<!-*\\[\\w+ [^\\]]*]>|<!\\[end[^\\]]*\\]-*>/.source,\n\n\thtmlComments: /<!--.*-->/.source,\n\n\toleLink: /<a\\s+name=\"OLE_LINK\\d+\">((?:.|[\\n])*?)<\\/a>/.source,\n\n\temptyTags: /<(?:p|i|b)[^>]*><\\/[^>]+>/.source,\n\n\temptyAttributes: /\\s+\\w+=[\"']{2}/.source,\n\n\tdeadTags: /<\\/?(span|div|[ovwxp]:\\w+)[^>]*>/.source,\n\n\tdeadTagsAndContent: /<(xml|head)>[\\S\\s]*<\\/(xml|head)>/.source,\n\n\tcontentLine: /(.)\\n(?!\\n)/.source,\n\n\turl: /((?:(?:https?:\\/\\/)|(?:www\\.))[-a-zA-Z0-9@:%._\\+~#=]{2,256}\\.[a-z]{2,4}\\b(?:[-a-zA-Z0-9@:%_\\+~#?&/=]*(?:.\\w+)?))/.source,\n\n}\n\n// compile the regexes\nvar regexesCompiled = _.mapValues(regexes, λ[new RegExp(#, 'gi')])\n\nvar clean = λ\n\t.replace(regexesCompiled.deadAttributes, '')\n\t.replace(regexesCompiled.nbsp, '')\n\t.replace(regexesCompiled.conditional, '')\n\t.replace(regexesCompiled.htmlComments, '')\n\t.replace(regexesCompiled.emptyAttributes, '')\n\t.replace(regexesCompiled.deadTags, '')\n\t.replace(regexesCompiled.deadTagsAndContent, '')\n\t.replace(regexesCompiled.oleLink, '$1')\n\t.replace(regexesCompiled.emptyTags, '') // after emptyAttributes and deadTags\n\t.replace(regexesCompiled.contentLine, '$1 ')\n\t.replace(regexesCompiled.url, '<a href=\"$1\">$1</a>')\n\t.replace(new RegExp('\\n{3,}', 'gi'), '\\n\\n') // replace 3 or more newlines w/2\n\t.replace(new RegExp('&quot;', 'gi'), '\"') // regex literals break sweetjs here\n\nmodule.exports = clean\nmodule.exports.regexes = regexes\nmodule.exports.regexesCompiled = regexesCompiled\n"],"sourceRoot":"/source/"}