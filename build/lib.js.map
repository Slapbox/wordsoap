{"version":3,"sources":["/Users/raine/projects/wordsoap/src/lib.js"],"names":["_$20422","require","regexes$20423","deadAttributes","source","nbsp","conditional","htmlComments","oleLink","emptyTags","emptyAttributes","deadTags","deadTagsAndContent","contentLine","regexesCompiled$20426","mapValues","a$20430","RegExp","clean$20429","a$20431","replace","module","exports","regexes","regexesCompiled"],"mappings":"AAAA;AAEA,IAAIA,OAAA,GAAIC,OAAA,CAAQ,QAAR,CAAR,CAFA;AAIA,IAAIC,aAAA,GAAU;AAAA,IAGbC;AAAAA,kBAAA,E,2HAA2IC,MAH9H;AAAA,IAKbC,IAAA,E,sCAA4CD,MAL/B;AAAA,IAQbE;AAAAA,eAAA,E,wCAAqDF,MARxC;AAAA,IAUbG,YAAA,E,YAA0BH,MAVb;AAAA,IAYbI,OAAA,E,8CAAuDJ,MAZ1C;AAAA,IAcbK,SAAA,E,4BAAuCL,MAd1B;AAAA,IAgBbM,eAAA,E,iBAAkCN,MAhBrB;AAAA,IAkBbO,QAAA,E,mCAA6CP,MAlBhC;AAAA,IAoBbQ,kBAAA,E,oCAAwDR,MApB3C;AAAA,IAsBbS,WAAA,E,cAA2BT,MAtBd;AAAA,CAAd,CAJA;AA+BA,IAAIU;AAAAA,qBAAA,GAAkBd,OAAA,CAAEe,SAAF,CAAYb,aAAZ,EAGJ,UAAAc,OAAA;AAAA,IAH2B,WAAIC,MAAJ,CAG3BD,OAH2B,EAAc,IAAd,EAG3B;AAAA,CAHI,CAAtB,CA/BA;AAiCA,IAAIE,WAAA,GA4DA,UAASC,OAAT,EAAY;AAAA,IAAE,OAAOA,OAAA,CA3DvBC,OA2DuB,CA3DfN,qBAAA,CAAgBX,cA2DD,EA3DiB,EA2DjB,EA1DvBiB,OA0DuB,CA1DfN,qBAAA,CAAgBT,IA0DD,EA1DO,EA0DP,EAzDvBe,OAyDuB,CAzDfN,qBAAA,CAAgBR,WAyDD,EAzDc,EAyDd,EAxDvBc,OAwDuB,CAxDfN,qBAAA,CAAgBP,YAwDD,EAxDe,EAwDf,EAvDvBa,OAuDuB,CAvDfN,qBAAA,CAAgBJ,eAuDD,EAvDkB,EAuDlB,EAtDvBU,OAsDuB,CAtDfN,qBAAA,CAAgBH,QAsDD,EAtDW,EAsDX,EArDvBS,OAqDuB,CArDfN,qBAAA,CAAgBF,kBAqDD,EArDqB,EAqDrB,EApDvBQ,OAoDuB,CApDfN,qBAAA,CAAgBN,OAoDD,EApDU,IAoDV,EAnDvBY,OAmDuB,CAnDfN,qBAAA,CAAgBL,SAmDD,EAnDY,EAmDZ,EAlDvBW,OAkDuB,CAlDf;AAAA,IAAAN,qBAAA,CAAgBD,WAkDD,EAlDc,KAkDd,EAjDvBO,OAiDuB,CAjDf,IAAIH,MAAJ,CAAW,QAAX,EAAqB,IAArB,CAiDe,EAjDa,MAiDb,EAhDvBG,OAgDuB,CAhDf;AAAA,QAAIH,MAAJ,CAAW,QAAX,EAAqB,IAArB,CAgDe,EAhDa,GAgDb,CAAP,CAAF;AAAA,CA5DhB,CAjCA;AA+CA;AAAAI,MAAA,CAAOC,OAAP,GAAiBJ,WAAjB,CA/CA;AAgDAG,MAAA,CAAOC,OAAP,CAAeC,OAAf,GAAyBrB,aAAzB,CAhDA;AAiDAmB,MAAA,CAAOC,OAAP,CAAeE,eAAf,GAAiCV,qBAAjC","file":"lib.js","sourcesContent":["'use strict'\n\nvar _ = require('lodash')\n\nvar regexes = {\n\t// Inspired by: http://tim.mackey.ie/2005/11/23/CleanWordHTMLUsingRegularExpressions.aspx\n\n\tdeadAttributes: /(?:\\s+(?:id|class|lang|style|size|face|link|vlink|align|clear|xmlns(?::\\w+|[ovwxp\\w+])?))=(?:'[^']*'|\"\"[^\"\"]*\"\"|[^\\s>]+)/.source,\n\n\tnbsp: /(<[^\\s>]*>&nbsp;<\\/[^\\s>]*>)|&nbsp;/.source,\n\n\t// https://regex101.com/r/sD4vJ8\n\tconditional: /<!-*\\[\\w+ [^\\]]*]>|<!\\[end[^\\]]*\\]-*>/.source,\n\n\thtmlComments: /<!--.*-->/.source,\n\n\toleLink: /<a\\s+name=\"OLE_LINK\\d+\">((?:.|[\\n])*?)<\\/a>/.source,\n\n\temptyTags: /<(?:p|i|b)[^>]*><\\/[^>]+>/.source,\n\n\temptyAttributes: /\\s+\\w+=[\"']{2}/.source,\n\n\tdeadTags: /<\\/?(span|div|[ovwxp]:\\w+)[^>]*>/.source,\n\n\tdeadTagsAndContent: /<(xml|head)>[\\S\\s]*<\\/(xml|head)>/.source,\n\n\tcontentLine: /(.)\\n(?!\\n)/.source,\n\n}\n\n// compile the regexes\nvar regexesCompiled = _.mapValues(regexes, λ[new RegExp(#, 'gi')])\n\nvar clean = λ\n\t.replace(regexesCompiled.deadAttributes, '')\n\t.replace(regexesCompiled.nbsp, '')\n\t.replace(regexesCompiled.conditional, '')\n\t.replace(regexesCompiled.htmlComments, '')\n\t.replace(regexesCompiled.emptyAttributes, '')\n\t.replace(regexesCompiled.deadTags, '')\n\t.replace(regexesCompiled.deadTagsAndContent, '')\n\t.replace(regexesCompiled.oleLink, '$1')\n\t.replace(regexesCompiled.emptyTags, '') // after emptyAttributes and deadTags\n\t.replace(regexesCompiled.contentLine, '$1 ')\n\t.replace(new RegExp('\\n{3,}', 'gi'), '\\n\\n') // replace 3 or more newlines w/2\n\t.replace(new RegExp('&quot;', 'gi'), '\"') // regex literals break sweetjs here\n\nmodule.exports = clean\nmodule.exports.regexes = regexes\nmodule.exports.regexesCompiled = regexesCompiled\n"],"sourceRoot":"/source/"}