{"version":3,"sources":["/Users/raine/projects/wordsoap/src/lib.js"],"names":["_$10494","require","regexes$10495","msoAttributes","source","nbsp","conditional","htmlComments","repeatTags","deadTags","deadTagsAndContent","regexesCompiled$10498","mapValues","a$10502","RegExp","clean$10501","a$10503","replace","module","exports","regexes","regexesCompiled"],"mappings":"AAAA;AAEA,IAAIA,OAAA,GAAIC,OAAA,CAAQ,QAAR,CAAR,CAFA;AAIA,IAAIC,aAAA,GAAU;AAAA,IAKbC;AAAAA;AAAAA;AAAAA,iBAAA,E,4GAA2HC,MAL9G;AAAA,IAObC,IAAA,E,sCAA4CD,MAP/B;AAAA,IAUbE;AAAAA,eAAA,E,wCAAqDF,MAVxC;AAAA,IAYbG,YAAA,E,YAA0BH,MAZb;AAAA,IAcbI,UAAA,E,sBAAkCJ,MAdrB;AAAA,IAgBbK,QAAA,E,+BAAyCL,MAhB5B;AAAA,IAkBbM,kBAAA,E,oCAAwDN,MAlB3C;AAAA,CAAd,CAJA;AA2BA,IAAIO;AAAAA,qBAAA,GAAkBX,OAAA,CAAEY,SAAF,CAAYV,aAAZ,EAOJ,UAAAW,OAAA;AAAA,IAP2B,WAAIC,MAAJ,CAO3BD,OAP2B,EAAc,IAAd,EAO3B;AAAA,CAPI,CAAtB,CA3BA;AA6BA,IAAIE,WAAA,GAgEA,UAASC,OAAT,EAAY;AAAA,IAAE,OAAOA,OAAA,CA9DtBC,OA8DsB,CA9DdN,qBAAA,CAAgBR,aA8DF,EA9DiB,MA8DjB,EA7DtBc,OA6DsB,CA7DdN,qBAAA,CAAgBN,IA6DF,EA7DQ,EA6DR,EA5DtBY,OA4DsB,CA5DdN,qBAAA,CAAgBL,WA4DF,EA5De,EA4Df,EA3DtBW,OA2DsB,CA3DdN,qBAAA,CAAgBJ,YA2DF,EA3DgB,EA2DhB,EA1DtBU,OA0DsB,CA1DdN,qBAAA,CAAgBF,QA0DF,EA1DY,EA0DZ,EAzDtBQ,OAyDsB,CAzDdN,qBAAA,CAAgBD,kBAyDF,EAzDsB,EAyDtB,EAxDtBO,OAwDsB,CAxDdN,qBAAA,CAAgBH,UAwDF,EAxDc,IAwDd,EAvDtBS,OAuDsB,CAvDd,IAAIH,MAAJ,CAAW,QAAX,EAAqB,IAArB,CAuDc,EAvDc,GAuDd,CAAP,CAAF;AAAA,CAhEhB,CA7BA;AAwCA;AAAAI,MAAA,CAAOC,OAAP,GAAiBJ,WAAjB,CAxCA;AAyCAG,MAAA,CAAOC,OAAP,CAAeC,OAAf,GAAyBlB,aAAzB,CAzCA;AA0CAgB,MAAA,CAAOC,OAAP,CAAeE,eAAf,GAAiCV,qBAAjC","file":"lib.js","sourcesContent":["'use strict'\n\nvar _ = require('lodash')\n\nvar regexes = {\n\t// Inspired by: http://tim.mackey.ie/2005/11/23/CleanWordHTMLUsingRegularExpressions.aspx\n\t// msoTags: /<[\\/]?(font|span|xml|del|ins|[ovwxp]:\\w+)[^>]*?>/.source,\n\n\t// https://regex101.com/r/lJ0nQ6\n\tmsoAttributes: /<(\\w+)(?:\\s+(?:class|lang|style|size|face|xmlns:\\w+|[ovwxp\\w+]))=(?:'[^']*'|\"\"[^\"\"]*\"\"|[^\\s>]+)(?:[^>]*)>/.source,\n\n\tnbsp: /(<[^\\s>]*>&nbsp;<\\/[^\\s>]*>)|&nbsp;/.source,\n\n\t// https://regex101.com/r/sD4vJ8\n\tconditional: /<!-*\\[\\w+ [^\\]]*]>|<!\\[end[^\\]]*\\]-*>/.source,\n\n\thtmlComments: /<!--.*-->/.source,\n\n\trepeatTags: /(?:(<\\/?span>){2,})/.source,\n\n\tdeadTags: /<\\/?(span|[ovwxp]:\\w+)[^>]*>/.source,\n\n\tdeadTagsAndContent: /<(xml|head)>[\\S\\s]*<\\/(xml|head)>/.source,\n\n}\n\n// compile the regexes\nvar regexesCompiled = _.mapValues(regexes, λ[new RegExp(#, 'gi')])\n\nvar clean = λ\n\t\t// .replace(new RegExp(r.msoTags, 'gi'), '')\n\t\t.replace(regexesCompiled.msoAttributes, '<$1>')\n\t\t.replace(regexesCompiled.nbsp, '')\n\t\t.replace(regexesCompiled.conditional, '')\n\t\t.replace(regexesCompiled.htmlComments, '')\n\t\t.replace(regexesCompiled.deadTags, '')\n\t\t.replace(regexesCompiled.deadTagsAndContent, '')\n\t\t.replace(regexesCompiled.repeatTags, '$1')\n\t\t.replace(new RegExp('&quot;', 'gi'), '\"') // regex literals break sweetjs here\n\nmodule.exports = clean\nmodule.exports.regexes = regexes\nmodule.exports.regexesCompiled = regexesCompiled\n"],"sourceRoot":"/source/"}