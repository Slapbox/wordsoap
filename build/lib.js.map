{"version":3,"sources":["/Users/raine/projects/wordsoap/src/lib.js"],"names":["_$25678","require","regexes$25679","deadAttributes","source","nbsp","conditional","htmlComments","oleLink","emptyTags","emptyAttributes","deadTags","deadTagsAndContent","contentLine","url","regexesCompiled$25682","mapValues","a$25686","RegExp","clean$25685","a$25687","replace","module","exports","regexes","regexesCompiled"],"mappings":"AAAA;AAEA,IAAIA,OAAA,GAAIC,OAAA,CAAQ,QAAR,CAAR,CAFA;AAIA,IAAIC,aAAA,GAAU;AAAA,IAKbC;AAAAA;AAAAA,kBAAA,E,qHAAqIC,MALxH;AAAA,IAObC,IAAA,E,sCAA4CD,MAP/B;AAAA,IAUbE;AAAAA,eAAA,E,wCAAqDF,MAVxC;AAAA,IAYbG,YAAA,E,YAA0BH,MAZb;AAAA,IAcbI,OAAA,E,8CAAuDJ,MAd1C;AAAA,IAgBbK,SAAA,E,4BAAuCL,MAhB1B;AAAA,IAkBbM,eAAA,E,iBAAkCN,MAlBrB;AAAA,IAoBbO,QAAA,E,8BAAwCP,MApB3B;AAAA,IAuBbQ;AAAAA,sBAAA,E,oCAAwDR,MAvB3C;AAAA,IAyBbS,WAAA,E,cAA2BT,MAzBd;AAAA,IA2BbU,GAAA,E,mHAAwHV,MA3B3G;AAAA,CAAd,CAJA;AAoCA,IAAIW;AAAAA,qBAAA,GAAkBf,OAAA,CAAEgB,SAAF,CAAYd,aAAZ,EAFJ,UAAAe,OAAA;AAAA,IAE2B,WAAIC,MAAJ,CAF3BD,OAE2B,EAAc,IAAd,EAF3B;AAAA,CAEI,CAAtB,CApCA;AAsCA,IAAIE,WAAA,GAuDA,UAASC,OAAT,EAAY;AAAA,IAAE,OAAOA,OAAA,CArDvBC,OAqDuB,CArDfN,qBAAA,CAAgBZ,cAqDD,EArDiB,EAqDjB,EApDvBkB,OAoDuB,CApDfN,qBAAA,CAAgBV,IAoDD,EApDO,EAoDP,EAnDvBgB,OAmDuB,CAnDfN,qBAAA,CAAgBT,WAmDD,EAnDc,EAmDd,EAlDvBe,OAkDuB,CAlDfN,qBAAA,CAAgBR,YAkDD,EAlDe,EAkDf,EAjDvBc,OAiDuB,CAjDfN,qBAAA,CAAgBL,eAiDD,EAjDkB,EAiDlB,EAhDvBW,OAgDuB,CAhDfN,qBAAA,CAAgBJ,QAgDD,EAhDW,EAgDX,EA/CvBU,OA+CuB,CA/CfN,qBAAA,CAAgBH,kBA+CD,EA/CqB,EA+CrB,EA9CvBS,OA8CuB,CA9CfN,qBAAA,CAAgBP,OA8CD,EA9CU,IA8CV,EA7CvBa,OA6CuB,CA7CfN,qBAAA,CAAgBN,SA6CD,EA7CY,EA6CZ,EA5CvBY,OA4CuB,CA5Cf;AAAA,IAAAN,qBAAA,CAAgBF,WA4CD,EA5Cc,KA4Cd,EA3CvBQ,OA2CuB,CA3CfN,qBAAA,CAAgBD,GA2CD,EA3CM,qBA2CN,EA1CvBO,OA0CuB,CA1Cf,IAAIH,MAAJ,CAAW,QAAX,EAAqB,IAArB,CA0Ce,EA1Ca,MA0Cb,EAzCvBG,OAyCuB,CAzCf;AAAA,QAAIH,MAAJ,CAAW,QAAX,EAAqB,IAArB,CAyCe,EAzCa,GAyCb,CAAP,CAAF;AAAA,CAvDhB,CAtCA;AAsDA;AAAAI,MAAA,CAAOC,OAAP,GAAiBJ,WAAjB,CAtDA;AAuDAG,MAAA,CAAOC,OAAP,CAAeC,OAAf,GAAyBtB,aAAzB,CAvDA;AAwDAoB,MAAA,CAAOC,OAAP,CAAeE,eAAf,GAAiCV,qBAAjC","file":"lib.js","sourcesContent":["'use strict'\n\nvar _ = require('lodash')\n\nvar regexes = {\n\t// Inspired by: http://tim.mackey.ie/2005/11/23/CleanWordHTMLUsingRegularExpressions.aspx\n\n\t// endNote: /<span\\s+class=MsoEndnoteReference>([^]*)<\\/span>/.source,\n\n\tdeadAttributes: /(?:\\s+(?:id|lang|style|size|face|link|vlink|align|clear|xmlns(?::\\w+|[ovwxp\\w+])?))=(?:'[^']*'|\"\"[^\"\"]*\"\"|[^\\s>]+)/.source,\n\n\tnbsp: /(<[^\\s>]*>&nbsp;<\\/[^\\s>]*>)|&nbsp;/.source,\n\n\t// https://regex101.com/r/sD4vJ8\n\tconditional: /<!-*\\[\\w+ [^\\]]*]>|<!\\[end[^\\]]*\\]-*>/.source,\n\n\thtmlComments: /<!--.*-->/.source,\n\n\toleLink: /<a\\s+name=\"OLE_LINK\\d+\">((?:.|[\\n])*?)<\\/a>/.source,\n\n\temptyTags: /<(?:p|i|b)[^>]*><\\/[^>]+>/.source,\n\n\temptyAttributes: /\\s+\\w+=[\"']{2}/.source,\n\n\tdeadTags: /<\\/?(div|[ovwxp]:\\w+)[^>]*>/.source,\n\t// deadTags: /<\\/?(span(?!\\s+class=MsoEndnoteReference)|div|[ovwxp]:\\w+)[^>]*>/.source,\n\n\tdeadTagsAndContent: /<(xml|head)>[\\S\\s]*<\\/(xml|head)>/.source,\n\n\tcontentLine: /(.)\\n(?!\\n)/.source,\n\n\turl: /((?:(?:https?:\\/\\/)|(?:www\\.))[-a-zA-Z0-9@:%._\\+~#=]{2,256}\\.[a-z]{2,4}\\b(?:[-a-zA-Z0-9@:%_\\+~#?&/=]*(?:.\\w+)?))/.source,\n\n}\n\n// compile the regexes\nvar regexesCompiled = _.mapValues(regexes, λ[new RegExp(#, 'gi')])\n\nvar clean = λ\n\t// .replace(regexesCompiled.endNote, '<sup>$1</sup>')\n\t.replace(regexesCompiled.deadAttributes, '')\n\t.replace(regexesCompiled.nbsp, '')\n\t.replace(regexesCompiled.conditional, '')\n\t.replace(regexesCompiled.htmlComments, '')\n\t.replace(regexesCompiled.emptyAttributes, '')\n\t.replace(regexesCompiled.deadTags, '')\n\t.replace(regexesCompiled.deadTagsAndContent, '')\n\t.replace(regexesCompiled.oleLink, '$1')\n\t.replace(regexesCompiled.emptyTags, '') // after emptyAttributes and deadTags\n\t.replace(regexesCompiled.contentLine, '$1 ')\n\t.replace(regexesCompiled.url, '<a href=\"$1\">$1</a>')\n\t.replace(new RegExp('\\n{3,}', 'gi'), '\\n\\n') // replace 3 or more newlines w/2\n\t.replace(new RegExp('&quot;', 'gi'), '\"') // regex literals break sweetjs here\n\nmodule.exports = clean\nmodule.exports.regexes = regexes\nmodule.exports.regexesCompiled = regexesCompiled\n"],"sourceRoot":"/source/"}